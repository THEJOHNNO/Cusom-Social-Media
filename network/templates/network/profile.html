{% extends "network/layout.html" %}
{% load static %}
{% block body %}


{% block scripts %}
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          const name = document.getElementById("upperCaseUser").innerText;
          const nameCapitalized = name.charAt(0).toUpperCase() + name.slice(1)
          document.getElementById("upperCaseUser").innerText = nameCapitalized;

          document.getElementById("invisibleDiv").style.display = "none";
          document.getElementById("invisibleDiv2").style.display = "none";
          document.getElementById("invisibleDiv3").style.display = "none";

          var requestUser = document.getElementById("invisibleDiv").innerText;
          var userProfile = document.getElementById("invisibleDiv3").innerText;
          var pageObject = document.getElementById("invisibleDiv2").innerText;

          if (requestUser != userProfile) {
            var elements = document.getElementsByClassName("editButton");
            //to loop over elements with specific class, PLEASE use [].forEach.call(elements, element => {});
            [].forEach.call(elements, element => {
              element.style.display = "none";
            });
          }
      })

    </script>
{% endblock %}

<div id="invisibleDiv">{{request.user}}</div>
<div id="invisibleDiv2">{{page_obj}}</div>
<div id="invisibleDiv3">{{ProfileUser}}</div>

<div style="padding: 12px 0px 0px 15px;">
<p id="upperCaseUser" style="font-weight: 400px; font-size: 32px; margin-left: 12px;color:#404040">{{ProfileUser}}</p>

  {% if request.user != ProfileUser %}
  <a href="{% url 'network:follow' ProfileUser ProfileUser.id %}" style="color: white;"><button type="button" class="btn btn-primary" style="margin-top: -7px; margin-left: 10px;">{{follow}}</button>  </a>
  {% endif %}
  <p style="font-weight: 600; font-size: 20px; display: inline-block; margin-left: 12px;">{{followersCount}}</p> <p style="display: inline-block; margin-right: 15px">followers</p>
  <p style="font-weight: 600; font-size: 20px; display: inline-block; ">{{followingCount}}</p> following
    <br>
</div>

<div class=container" style="margin: 0px 0px 0px 20px; width: 97%">
  <div class="row" id="thirdRow">
    <div class="formBorder" style="margin-top:10px;">
      <div id="post" style="margin: 0px 0px 0px 6px;">
        {% for post in page_obj %}
        <p style="margin-top: 10px; font-size: 18px; color: #505050">{{post.postContent}}</p>

          <a href="{% url 'network:editPost' post.id %}" style="color: white;">
            <button type="button" class="btn btn-primary editButton" style="margin-top: -7px; float: right; margin-right: 0px;">Edit
            </button></a>

          <span style="color: #808080;">{{post.dateTime}}</span>


          <div class="container" style="padding: 8px 0px 0px 0px; margin: 0px;">
            <div class="row">
              <a class="heartLinks" style="margin-left: 15px;" data-id="{{post.id}}">
<img src="{% static 'heart.png' %}" style="height: auto; max-width: 20px; display: block"></a>
              <span style="position: relative; display: inline-block;" data-ids="{{post.id}}">{{post.likes}}</span>
            </div>
          </div>
          <hr>
        {% empty %}
          <p> You haven't posted anything yet, What's on your mind?</p>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<div class="pagination" style="margin: 15px 0px 0px 20px;">
  <span class="step-links">
      {% if page_obj.has_previous %}
          <a href="?page=1">&laquo; first |</a>
          <a href="?page={{ page_obj.previous_page_number }}">previous</a>
      {% endif %}

      <span class="current">
          | Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }} |
      </span>

      {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}">next |</a>
          <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
      {% endif %}
  </span>
</div>

{% endblock %}
